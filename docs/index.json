[{"content":"操作步骤 git clone https://github.com/filecoin-project/filecoin-ffi.git cd filecoin-ffi ./build.sh 出现报错  ./build.sh go clean -cache -testcache . cbindgen.toml filecoin.pc rustc-target-features-optimized.json src/ rm -rf filcrypto.h filcrypto.pc libfilcrypto.a .install-filcrypto rm -f ./runner cd rust \u0026amp;\u0026amp; cargo clean \u0026amp;\u0026amp; cd .. info: component 'rust-std' for target 'x86_64-apple-darwin' is up to date info: component 'rust-std' for target 'aarch64-apple-darwin' is up to date Updating crates.io index Updating git repository `https://github.com/filecoin-project/rust-filecoin-proofs-api` Updating crates.io index Ignored package `cargo-lipo v3.2.0` is already installed, use --force to override Updating crates.io index Ignored package `cbindgen v0.21.0` is already installed, use --force to override ERROR: Couldn't execute `cargo metadata` with manifest \u0026quot;/Users/koyeo/workspace/filwallet-backend/extern/filecoin-ffi/rust/Cargo.toml\u0026quot;: Metadata(Output { status: ExitStatus(ExitStatus(25856)), stdout: \u0026quot;\u0026quot;, stderr: \u0026quot; Downloading crates ...\\nerror: failed to download `execute-command-macro v0.1.7`\\n\\nCaused by:\\n unable to get packages from source\\n\\nCaused by:\\n failed to parse manifest at `/Users/koyeo/.cargo/registry/src/github.com-1ecc6299db9ec823/execute-command-macro-0.1.7/Cargo.toml`\\n\\nCaused by:\\n feature `edition2021` is required\\n\\n The package requires the Cargo feature called `edition2021`, but that feature is not stabilized in this version of Cargo (1.55.0-nightly (d21c22870 2021-07-26)).\\n Consider trying a more recent nightly release.\\n See https://doc.rust-lang.org/nightly/cargo/reference/unstable.html#edition-2021 for more information about the status of this feature.\\n\u0026quot; }) ERROR: Couldn't generate bindings for /Users/koyeo/workspace/filwallet-backend/extern/filecoin-ffi/rust. 解决思路  尝试通过升级 rust 解决： rustup default nightly \u0026amp;\u0026amp; rustup update \u0026mdash; 失败 通过查看 filecoin-ffi 发布的最新版本，切换到该版本下编译，而非在 master 分支编译。 \u0026mdash; 成功   注意： 编译时注意参考官网安装相关依赖：https://filwiki.cn/get-started/lotus/installation/#macos\n 相关链接 filecoin-ffi releases\n","permalink":"https://kozilla.io/posts/13/","summary":"操作步骤 git clone https://github.com/filecoin-project/filecoin-ffi.git cd filecoin-ffi ./build.sh 出现报错  ./build.sh go clean -cache -testcache . cbindgen.toml filecoin.pc rustc-target-features-optimized.json src/ rm -rf filcrypto.h filcrypto.pc libfilcrypto.a .install-filcrypto rm -f ./runner cd rust \u0026amp;\u0026amp; cargo clean \u0026amp;\u0026amp; cd .. info: component 'rust-std' for target 'x86_64-apple-darwin' is up to date info: component 'rust-std' for target 'aarch64-apple-darwin' is up to date Updating crates.io index Updating git repository `https://github.com/filecoin-project/rust-filecoin-proofs-api` Updating crates.io index Ignored package `cargo-lipo v3.2.0` is already installed, use --force to override Updating crates.","title":"解决 filecoin-ffi build 时 rust `edition2021` is required 错误"},{"content":"盒子模型 CSS 通过盒子模型来描述一个元素的尺寸显示逻辑。CSS 对于元素的尺寸描述，都可以抽象为一个盒子，由如下部分组成：\n content - 内容区域 padding - 内边距 border - 边框 margin - 外边距  盒子模型的特点  padding 不能为负值，margin 可以为负值； 背景色可以平铺到非 margin 区域（包括 content、padding、border 区域，border 颜色会和盒子背景色重合） ； margin-top 默认会出现传递现象（子元素的 margin-top 属性会引起父元素出现 margin-top 的效果）; margin 上下会出现叠加（上下两个块盒子有相邻的 margin，会出现叠加效果）。  标准盒子模型（box-sizing: content-box） 标准盒子模型，width 和 height 定义的是 content 的尺寸。\n怪异盒子模型（box-sizing: border-box） 标准盒子模型，width 和 height 定义的是 content + padding + border 的尺寸。\n在盒子的宽高已知确定的情况下布局时会非常有用。\n块级盒子（display: block） 一般使用块级盒子用来作为布局的元素。\n特点：\n 元素独占一行； 支持所有的样式； 元素受父元素宽度约束（子元素包括 margin，皆在父元素内）； 所占区域是一个矩形。  内联盒子（display: inline） 特点：\n 盒子不会产生换行； 有些样式不支持，如：width、height 等； 缺失宽度的时候，宽度由内容决定； 所占区域不一定是矩形。   小细节：内联元素与内联元素之间如果有空格，则显示上默认会出现间隙。\n 自适应盒模型 子块元素不设置 withd，默认受父元素宽度约束（子块元素包括 margin，皆在父元素内），则该子块元素为一个自适应盒模型。\n一旦设定了子块元素的 width，则在正常盒子模型下，子块元素的 content 宽度不再变化，外围叠加的 padding、border、margin 加起来，可能会超出父元素。\n 思考：子块元素设置 width=100% 会怎样？\n 文档流 TODO\n","permalink":"https://kozilla.io/posts/12/","summary":"盒子模型 CSS 通过盒子模型来描述一个元素的尺寸显示逻辑。CSS 对于元素的尺寸描述，都可以抽象为一个盒子，由如下部分组成：\n content - 内容区域 padding - 内边距 border - 边框 margin - 外边距  盒子模型的特点  padding 不能为负值，margin 可以为负值； 背景色可以平铺到非 margin 区域（包括 content、padding、border 区域，border 颜色会和盒子背景色重合） ； margin-top 默认会出现传递现象（子元素的 margin-top 属性会引起父元素出现 margin-top 的效果）; margin 上下会出现叠加（上下两个块盒子有相邻的 margin，会出现叠加效果）。  标准盒子模型（box-sizing: content-box） 标准盒子模型，width 和 height 定义的是 content 的尺寸。\n怪异盒子模型（box-sizing: border-box） 标准盒子模型，width 和 height 定义的是 content + padding + border 的尺寸。\n在盒子的宽高已知确定的情况下布局时会非常有用。\n块级盒子（display: block） 一般使用块级盒子用来作为布局的元素。\n特点：\n 元素独占一行； 支持所有的样式； 元素受父元素宽度约束（子元素包括 margin，皆在父元素内）； 所占区域是一个矩形。  内联盒子（display: inline） 特点：","title":"CSS 布局实操"},{"content":"报错示例 配置 tsconfig.json 在项目根目录检查 tsconfig.json 配置，没有则引入：\n{ \u0026quot;compilerOptions\u0026quot;: { \u0026quot;target\u0026quot;: \u0026quot;esnext\u0026quot;, \u0026quot;module\u0026quot;: \u0026quot;esnext\u0026quot;, \u0026quot;moduleResolution\u0026quot;: \u0026quot;node\u0026quot;, \u0026quot;resolveJsonModule\u0026quot;: true, \u0026quot;importHelpers\u0026quot;: true, \u0026quot;jsx\u0026quot;: \u0026quot;react-jsx\u0026quot;, \u0026quot;esModuleInterop\u0026quot;: true, \u0026quot;sourceMap\u0026quot;: true, \u0026quot;baseUrl\u0026quot;: \u0026quot;./\u0026quot;, \u0026quot;strict\u0026quot;: true, \u0026quot;allowSyntheticDefaultImports\u0026quot;: true }, \u0026quot;include\u0026quot;: [ \u0026quot;src/**/*\u0026quot;, \u0026quot;typings.d.ts\u0026quot; ] } 配置 typing.d.ts  注：typings.d.ts 在 tsconfig.json 中被引用。\n declare module \u0026quot;*.scss\u0026quot; { const styles: any; export default styles; } ","permalink":"https://kozilla.io/posts/11/","summary":"报错示例 配置 tsconfig.json 在项目根目录检查 tsconfig.json 配置，没有则引入：\n{ \u0026quot;compilerOptions\u0026quot;: { \u0026quot;target\u0026quot;: \u0026quot;esnext\u0026quot;, \u0026quot;module\u0026quot;: \u0026quot;esnext\u0026quot;, \u0026quot;moduleResolution\u0026quot;: \u0026quot;node\u0026quot;, \u0026quot;resolveJsonModule\u0026quot;: true, \u0026quot;importHelpers\u0026quot;: true, \u0026quot;jsx\u0026quot;: \u0026quot;react-jsx\u0026quot;, \u0026quot;esModuleInterop\u0026quot;: true, \u0026quot;sourceMap\u0026quot;: true, \u0026quot;baseUrl\u0026quot;: \u0026quot;./\u0026quot;, \u0026quot;strict\u0026quot;: true, \u0026quot;allowSyntheticDefaultImports\u0026quot;: true }, \u0026quot;include\u0026quot;: [ \u0026quot;src/**/*\u0026quot;, \u0026quot;typings.d.ts\u0026quot; ] } 配置 typing.d.ts  注：typings.d.ts 在 tsconfig.json 中被引用。\n declare module \u0026quot;*.scss\u0026quot; { const styles: any; export default styles; } ","title":"修复 tsx 下 import styles from 'index.scss' webstorm 报错问题"},{"content":"效果演示（点击播放） 代码片段自动注入功能可谓是开发时的一大神器。有该功能的软件包括：\n Alfred Dash TEIMPrefSetter  三款软件都是收费软件(可以自行搜索破解版)。\n选择 Alfred 的理由 Alfred 拥有很多强大的功能，如快速打开软件、计算器、搜索等等；在代码片段注入时，Dash 在开启输入法的时候，即便切换了英文状态，也无法正常使用，有可能是 bigSur 下的版本不兼容引起的。在 Alfred 下没有这个问题，甚至中文输入法下也能使用。\n配置 Alfred snippet 配置面板 在 Preferences -\u0026gt; Features -\u0026gt; Snippets 中配置：\n打开辅助功能 注意上图标红处，需要在 系统偏好设置 -\u0026gt; 安全性与隐私 -\u0026gt; 辅助功能 中打开 Alfred 开关：\n添加集合 附加处同一定义了之后往该集合中添加的代码片段关键字的前缀。此处定义了冒号。\n添加代码片段 名称不是必须的，关键字是用来输入触发注入代码片段的，允许自动扩展一定要打勾，否则输入时关键字匹配了，也不会注入代码。\n配置成功 在此处可以看到允许自动扩展已打开，同时该代码片段的关键词是 :ie。\n解决 Jetbrains 编辑器光标错乱问题 以 goland 为例，将粘贴时格式化代码设置为 none 即可：\n","permalink":"https://kozilla.io/posts/10/","summary":"效果演示（点击播放） 代码片段自动注入功能可谓是开发时的一大神器。有该功能的软件包括：\n Alfred Dash TEIMPrefSetter  三款软件都是收费软件(可以自行搜索破解版)。\n选择 Alfred 的理由 Alfred 拥有很多强大的功能，如快速打开软件、计算器、搜索等等；在代码片段注入时，Dash 在开启输入法的时候，即便切换了英文状态，也无法正常使用，有可能是 bigSur 下的版本不兼容引起的。在 Alfred 下没有这个问题，甚至中文输入法下也能使用。\n配置 Alfred snippet 配置面板 在 Preferences -\u0026gt; Features -\u0026gt; Snippets 中配置：\n打开辅助功能 注意上图标红处，需要在 系统偏好设置 -\u0026gt; 安全性与隐私 -\u0026gt; 辅助功能 中打开 Alfred 开关：\n添加集合 附加处同一定义了之后往该集合中添加的代码片段关键字的前缀。此处定义了冒号。\n添加代码片段 名称不是必须的，关键字是用来输入触发注入代码片段的，允许自动扩展一定要打勾，否则输入时关键字匹配了，也不会注入代码。\n配置成功 在此处可以看到允许自动扩展已打开，同时该代码片段的关键词是 :ie。\n解决 Jetbrains 编辑器光标错乱问题 以 goland 为例，将粘贴时格式化代码设置为 none 即可：","title":"配置 Alfred snippet 实现代码片段注入，修复 idea、goland、webstorm 光标错位问题"},{"content":"依赖包 import \u0026#34;github.com/robfig/cron/v3\u0026#34; 基本使用 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/robfig/cron/v3\u0026#34; \u0026#34;time\u0026#34; ) func main() { c := cron.New(cron.WithSeconds()) // 含义查看下文表达式示例 \tc.AddFunc(\u0026#34;0/7 * * * * *\u0026#34;, func() { fmt.Println(time.Now().Format(\u0026#34;2006-01-02 15:04:05\u0026#34;)) }) c.Start() time.Sleep(300 * time.Second) } Cron 表达式 表达式字段  注：使用 cron.New(cron.WithSeconds()) 开启秒字段支持。\n    字段 必填 取值范围 特殊字符     秒（Seconds） 是 0–59 * / , -   分（Minutes） 是 0–59 * / , -   小时（Hours） 是 0–23 * / , -   一月中的某一天（Day of month） 是 1–31 * / , - ?   月（Month） 是 1–12 or JAN–DEC * / , -   星期几（Day of week） 是 0–6 or SUN–SAT * / , - ?    特殊符号   星号（*） 星号表示匹配该字段的所有值，如在上面表达式的天位置中使用星号，就表示每天。\n  斜线（/） 斜杠用于描述范围的增量，比如'3-59/15\u0026rsquo;这个表达式在表示从现在的第三分钟开始和往后的每15分钟，到第59分钟为止。表现形式为\u0026quot;* \\ / \u0026hellip;\u0026quot;，等同于\u0026quot;N-MAX / m\u0026quot;，即在该字段范围内的增量。即从N开始，使用增量 m 直到 MAX 结束，它没有重复\n  逗号（,） 逗号用于分隔列表中的项，比如，在上表的\u0026rsquo;星期几\u0026rsquo;中使用 \u0026ldquo;MON,WED,FRI\u0026rdquo; 表示星期一、星期三和星期五\n  连字符（-） 连字符用于定义范围。例如，9-17表示包括上午9点至下午5点在内的每小时\n  问号 （?） 表示不指定值，可以来代替 *\n  预定义表达式    表达式 描述 等式     @yearly (or @annually) 每年1月1日 00:00:00 执行一次 0 0 0 1 1 *   @monthly 每个月第一天的 00:00:00 执行一次 0 0 0 1 * *   @weekly 每周周六的 00:00:00 执行一次 0 0 0 * * 0   @daily (or @midnight) 每天 00:00:00 执行一次 0 0 0 * * *   @hourly 每小时执行一次 0 0 * * * *   @every time 指定时间间隔执行一次，如 @every 5s，每隔5秒执行一次。 0/5 * * * * *    表达式示例 表达式 | 描述 | 执行时间点 :\u0026mdash;|:\u0026mdash; 0/7 * * * * * | 每分钟秒数是 0或是 7 的倍数时执行一次执行 | 每分钟第 0,7,14,21,28,35,42,49,56 秒执行 1/7 * * * * * | 每分钟秒数是 1 秒或（秒数-1）是 7 的倍数时执行一次 | 每分钟第 1,8,15,22,29,36,43,50,57 秒执行 */7 * * * * * | 等价于 0/7 * * * * * | - 1/30 * * * * * | 每分钟的第 1 秒和(秒数 - 1) 是 30 的倍数执行 | 第1秒，第31秒执行，如 12:00:01、12:00:31 0-15/5 * * * * *| 每分钟的 [0 15] 秒区间，秒数是 0 或是 5 的倍数是执行一次 | 每分钟第 0,5,10,15 秒执行 3-15/7 * * * * *| 每分钟的 [3 15] 秒区间，秒数是 3 或是 (秒数-3) 是 7 的倍数是执行一次 | 每分钟第 3,10 秒 3 * * * * * | 每分钟的第 3 秒执行一次 | - @every 5s | 每 5 秒执行一次，等价于 0/5 * * * * * | - @every 1h30m | 每一个半小时执行一次 | -\n参考链接  robfig cron wikipedia cron golang cron定时任务简单实现  ","permalink":"https://kozilla.io/posts/9/","summary":"依赖包 import \u0026#34;github.com/robfig/cron/v3\u0026#34; 基本使用 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/robfig/cron/v3\u0026#34; \u0026#34;time\u0026#34; ) func main() { c := cron.New(cron.WithSeconds()) // 含义查看下文表达式示例 \tc.AddFunc(\u0026#34;0/7 * * * * *\u0026#34;, func() { fmt.Println(time.Now().Format(\u0026#34;2006-01-02 15:04:05\u0026#34;)) }) c.Start() time.Sleep(300 * time.Second) } Cron 表达式 表达式字段  注：使用 cron.New(cron.WithSeconds()) 开启秒字段支持。\n    字段 必填 取值范围 特殊字符     秒（Seconds） 是 0–59 * / , -   分（Minutes） 是 0–59 * / , -   小时（Hours） 是 0–23 * / , -   一月中的某一天（Day of month） 是 1–31 * / , - ?","title":"Golang cron 定时使用指南"},{"content":"安装 mkdir /app/kafka cd /app/kafka wget https://mirrors.bfsu.edu.cn/apache/kafka/2.8.0/kafka_2.13-2.8.0.tgz tar -xzf kafka_2.13-2.8.0.tgz cd kafka_2.13-2.8.0 ## 安装 JDK yum install java-1.8.0-openjdk.x86_64 -y # 启动 zookeeper bin/zookeeper-server-start.sh config/zookeeper.properties # 启动 kafka broker bin/kafka-server-start.sh config/server.properties 消息操作 # 创建 Topic bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 # 生产消息 bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092 # 消费消息 bin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092 配置 supervisor 启动  kafka-zookeeper.conf\n [program:kafka-zookeeper] command = /app/kafka/kafka_2.13-2.8.0/bin/zookeeper-server-start.sh /app/kafka/kafka_2.13-2.8.0/config/zookeeper.properties autostart = true startsecs = 5 autorestart = true startretries = 3 user = root redirect_stderr = true stdout_logfile_maxbytes = 20MB stdout_logfile_backups = 20 stdout_logfile = /app/kafka/log/zookepper.log  kafka-server.conf\n [program:kafka-server] command = /app/kafka/kafka_2.13-2.8.0/bin/kafka-server-start.sh /app/kafka/kafka_2.13-2.8.0/config/server.properties autostart = true startsecs = 5 autorestart = true startretries = 3 user = root redirect_stderr = true stdout_logfile_maxbytes = 20MB stdout_logfile_backups = 20 stdout_logfile = /app/kafka/log/server.log ","permalink":"https://kozilla.io/posts/8/","summary":"安装 mkdir /app/kafka cd /app/kafka wget https://mirrors.bfsu.edu.cn/apache/kafka/2.8.0/kafka_2.13-2.8.0.tgz tar -xzf kafka_2.13-2.8.0.tgz cd kafka_2.13-2.8.0 ## 安装 JDK yum install java-1.8.0-openjdk.x86_64 -y # 启动 zookeeper bin/zookeeper-server-start.sh config/zookeeper.properties # 启动 kafka broker bin/kafka-server-start.sh config/server.properties 消息操作 # 创建 Topic bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092 # 生产消息 bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server localhost:9092 # 消费消息 bin/kafka-console-consumer.sh --topic quickstart-events --from-beginning --bootstrap-server localhost:9092 配置 supervisor 启动  kafka-zookeeper.conf\n [program:kafka-zookeeper] command = /app/kafka/kafka_2.13-2.8.0/bin/zookeeper-server-start.sh /app/kafka/kafka_2.13-2.8.0/config/zookeeper.properties autostart = true startsecs = 5 autorestart = true startretries = 3 user = root redirect_stderr = true stdout_logfile_maxbytes = 20MB stdout_logfile_backups = 20 stdout_logfile = /app/kafka/log/zookepper.","title":"Kafka 简易使用指南"},{"content":"1. 安装 Supervisor 支持在 python 2.4 或更高版本下运行，不支持 python 3。CentOS 默认安装了 Python 2.7.5。\n# easy_install supervisor 2. 生成配置文件 # mkdir /etc/supervisor/ \u0026amp;\u0026amp; touch /etc/supervisor/supervisord.conf # echo_supervisord_conf \u0026gt; /etc/supervisor/supervisord.conf 3. 编辑配置文件 $ mkdir -p /var/run \u0026amp;\u0026amp; chmod 777 /var/run $ mkdir -p /var/log \u0026amp;\u0026amp; chmod 777 /var/log 这里只列出了一些常用配置项：\n[unix_http_server] file=/var/run/supervisor.sock ; UNIX socket 文件，supervisorctl 会使用 ;[inet_http_server] ; HTTP 服务器，提供 web 管理界面 ;port=127.0.0.1:9001 ; Web 管理后台运行的 IP 和端口，如果开放到公网，需要注意安全性 ;username=user ; 登录管理后台的用户名 ;password=123 ; 登录管理后台的密码 [supervisord] logfile=/var/log/supervisord.log ; 日志文件，默认是 $CWD/supervisord.log pidfile=/var/run/supervisord.pid ; pid 文件 ; 包含其他的配置文件 [include] files = /etc/supervisor/conf.d/*.conf 我们把上面这部分配置保存到 /etc/supervisor/supervisord.conf（或其他任意有权限访问的文件），然后启动 supervisord（通过 -c 选项指定配置文件路径，如果不指定会按照这个顺序查找配置文件：$CWD/supervisord.conf, $CWD/etc/supervisord.conf, /etc/supervisord.conf, /etc/supervisor/supervisord.conf）：\n# supervisord -c /etc/supervisor/supervisord.conf 查看 supervisord 是否在运行：\n# ps -A | grep supervisord 4. 编辑程序运行配置 添加程序运行配置文件，下面以日志服务 thrift-log 在开发联调环境运行为例:\n# mkdir -p /etc/supervisor/conf.d # cd /etc/supervisor/conf.d # vim thrift-log.conf 输入下列内容：\n[program:thrift-log] directory = /gowork/src/bisale/thrift-log ; 程序的启动目录 command = go run log_server.go ; 启动命令 autostart = true ; 在 supervisord 启动的时候也自动启动 startsecs = 5 ; 启动 5 秒后没有异常退出，就当作已经正常启动了 autorestart = true ; 程序异常退出后自动重启 startretries = 3 ; 启动失败自动重试次数，默认是 3 user = root ; 用哪个用户启动 redirect_stderr = true ; 把 stderr 重定向到 stdout，默认 false stdout_logfile_maxbytes = 20MB ; stdout 日志文件大小，默认 50MB stdout_logfile_backups = 20 ; stdout 日志文件备份数 environment=GO_ENV=debug,NODE_ENV=debug ; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件） stdout_logfile = /opt/logs/thrift-log/thrift-log-stdout.log 无备注版（在跳板机界面下编辑大量中文容易卡死）：\n[program:thrift-log] directory = /gowork/src/bisale/thrift-log command = go run log_server.go autostart = true startsecs = 5 autorestart = true startretries = 3 user = root redirect_stderr = true stdout_logfile_maxbytes = 20MB stdout_logfile_backups = 20 environment=GO_ENV=debug,NODE_ENV=debug stdout_logfile = /opt/logs/thrift-log/thrift-log-stdout.log 5. 使用 supervisorctl Supervisorctl 是 supervisord 的一个命令行客户端工具，启动时需要指定与 supervisord 使用同一份配置文件，否则与 supervisord 一样按照顺序查找配置文件。\n# supervisorctl -c /etc/supervisor/supervisord.conf 上面这个命令会进入 supervisorctl 的 shell 界面，然后可以执行不同的命令了\n\u0026gt; status # 查看程序状态 \u0026gt; stop thrift-log # 关闭 usercenter 程序 \u0026gt; start thrift-log # 启动 usercenter 程序 \u0026gt; restart thrift-log # 重启 usercenter 程序 \u0026gt; reread ＃ 读取有更新（增加）的配置文件，不会启动新添加的程序 \u0026gt; update ＃ 重启配置文件修改过的程序 上面这些命令都有相应的输出，除了进入 supervisorctl 的 shell 界面，也可以直接在 bash 终端运行：\n$ supervisorctl status $ supervisorctl stop thrift-log $ supervisorctl start thrift-log $ supervisorctl restart thrift-log $ supervisorctl reread $ supervisorctl update 6. 参考文档  http://supervisord.org/index.html 使用 supervisor 管理进程  ","permalink":"https://kozilla.io/posts/7/","summary":"1. 安装 Supervisor 支持在 python 2.4 或更高版本下运行，不支持 python 3。CentOS 默认安装了 Python 2.7.5。\n# easy_install supervisor 2. 生成配置文件 # mkdir /etc/supervisor/ \u0026amp;\u0026amp; touch /etc/supervisor/supervisord.conf # echo_supervisord_conf \u0026gt; /etc/supervisor/supervisord.conf 3. 编辑配置文件 $ mkdir -p /var/run \u0026amp;\u0026amp; chmod 777 /var/run $ mkdir -p /var/log \u0026amp;\u0026amp; chmod 777 /var/log 这里只列出了一些常用配置项：\n[unix_http_server] file=/var/run/supervisor.sock ; UNIX socket 文件，supervisorctl 会使用 ;[inet_http_server] ; HTTP 服务器，提供 web 管理界面 ;port=127.0.0.1:9001 ; Web 管理后台运行的 IP 和端口，如果开放到公网，需要注意安全性 ;username=user ; 登录管理后台的用户名 ;password=123 ; 登录管理后台的密码 [supervisord] logfile=/var/log/supervisord.","title":"CentOS 使用 Supervisior 部署程序"},{"content":"添加 Yum 源 访问 https://www.postgresql.org/download 选择操作 postgresql 版本及对应的操作系统，从生成安装脚本中选择 rpm 源。\n执行安装命令 # Install the repository RPM: sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm # Install PostgreSQL: sudo yum install postgresql13-server -y # Optionally initialize the database and enable automatic start: sudo /usr/pgsql-13/bin/postgresql-13-setup initdb sudo systemctl enable postgresql-13 sudo systemctl start postgresql-13 设置环境变量  vim ~/.bashrc\n export PATH=$PATH:/usr/pgsql-13/bin 登录 $ su postgres $ psql 修改 ROOT 用户密码 postgres-# alter user postgres with password '123456'; ","permalink":"https://kozilla.io/posts/6/","summary":"添加 Yum 源 访问 https://www.postgresql.org/download 选择操作 postgresql 版本及对应的操作系统，从生成安装脚本中选择 rpm 源。\n执行安装命令 # Install the repository RPM: sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm # Install PostgreSQL: sudo yum install postgresql13-server -y # Optionally initialize the database and enable automatic start: sudo /usr/pgsql-13/bin/postgresql-13-setup initdb sudo systemctl enable postgresql-13 sudo systemctl start postgresql-13 设置环境变量  vim ~/.bashrc\n export PATH=$PATH:/usr/pgsql-13/bin 登录 $ su postgres $ psql 修改 ROOT 用户密码 postgres-# alter user postgres with password '123456'; ","title":"Centos 安装 postgresql"},{"content":"要求  一台公网服务器 若干台内网服务器  服务器安装 $ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz $ tar -xvf linux_amd64_server.tar.gz $ ./nps install 配置文件目录：\n/etc/nps 命令用法：\nnps start|stop|restart|uninstall|update or nps-update update 启动：\n$ nps start # 以守护进程启动 nps默认配置文件使用了80，443，8080，8024端口:\n 80与443端口为域名解析模式默认端口 8080为web管理访问端口 8024为网桥端口，用于客户端与服务器通信  客户端安装 $ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_client.tar.gz $ tar -xvf linux_amd64_client.tar.gz 启动：\n$ ./npc -server ip:8024 -vkey \u0026quot;nps后台生成的客户端的key\u0026quot; ","permalink":"https://kozilla.io/posts/5/","summary":"要求  一台公网服务器 若干台内网服务器  服务器安装 $ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz $ tar -xvf linux_amd64_server.tar.gz $ ./nps install 配置文件目录：\n/etc/nps 命令用法：\nnps start|stop|restart|uninstall|update or nps-update update 启动：\n$ nps start # 以守护进程启动 nps默认配置文件使用了80，443，8080，8024端口:\n 80与443端口为域名解析模式默认端口 8080为web管理访问端口 8024为网桥端口，用于客户端与服务器通信  客户端安装 $ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_client.tar.gz $ tar -xvf linux_amd64_client.tar.gz 启动：\n$ ./npc -server ip:8024 -vkey \u0026quot;nps后台生成的客户端的key\u0026quot; ","title":"nps 配置内网穿透"},{"content":" 结论：分区表创建分区时，范围定义是左闭右开。\n 创建分区表 create table orders ( id bigint, create_time timestamp(0) default current_timestamp ) partition by range (id); 创建默认分区 当插入数据没有子分区匹配时，会添加到默认分区。\ncreate table def partition of orders default; 创建子分区 create table orders_1 partition of orders for values from (1) to (10); create table orders_2 partition of orders for values from (10) to (20); 插入数据 测试1：\ninsert into orders(id) values (10); 记录在 orders_2 子分区中。\n测试2：\ninsert into orders(id) values (20); 记录在 def 默认分区中。\n","permalink":"https://kozilla.io/posts/4/","summary":"结论：分区表创建分区时，范围定义是左闭右开。\n 创建分区表 create table orders ( id bigint, create_time timestamp(0) default current_timestamp ) partition by range (id); 创建默认分区 当插入数据没有子分区匹配时，会添加到默认分区。\ncreate table def partition of orders default; 创建子分区 create table orders_1 partition of orders for values from (1) to (10); create table orders_2 partition of orders for values from (10) to (20); 插入数据 测试1：\ninsert into orders(id) values (10); 记录在 orders_2 子分区中。\n测试2：\ninsert into orders(id) values (20); 记录在 def 默认分区中。","title":"Postgresql 分区表分区范围"},{"content":"安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。\n启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile\n 添加配置项：\nconfig.vm.network \u0026quot;forwarded_port\u0026quot;, guest: 5671, host: 5671 config.vm.synced_folder \u0026quot;/Users/kun/workspace\u0026quot;, \u0026quot;/workspace\u0026quot; 查看《完整配置文件》。\n启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：\nVagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem \u0026quot;vboxsf\u0026quot; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest. This is not a bug in Vagrant and is usually caused by a faulty Vagrant box. For context, the command attempted was: mount -t vboxsf -o uid=1000,gid=1000 workspace /workspace The error output from the command was: mount: /workspace: unknown filesystem type 'vboxsf'. 修复共享目录报错 安装虚拟机依赖：\n$ vagrant ssh # 忽视报错，进入虚拟机 $ sudo yum -y install kernel kernel-devel # 安装依赖 $ exit 安装 vagrant 插件:\n$ vagrant plugin install vagrant-vbguest $ vagrant vbguest # 如果报错，先 vagrant reload 一下 $ vagrant reload $ vagrant ssh 设置 root 密码 进入虚拟机：\n$ sudo passwd root ","permalink":"https://kozilla.io/posts/3/","summary":"安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。\n启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile\n 添加配置项：\nconfig.vm.network \u0026quot;forwarded_port\u0026quot;, guest: 5671, host: 5671 config.vm.synced_folder \u0026quot;/Users/kun/workspace\u0026quot;, \u0026quot;/workspace\u0026quot; 查看《完整配置文件》。\n启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：\nVagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem \u0026quot;vboxsf\u0026quot; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest.","title":"mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享"},{"content":"fping命令 fping类似于ping，但比ping强大。与ping要等待某一主机连接超时或发回反馈信息不同，fping给一个主机发送完数据包后，马上给下一个主机发送数据包，实现多主机同时ping，fping还可以在命令行中指定要ping的主机数量范围。\nMac 安装 brew install fping 选项 -a # 显示存活的主机 -b # ping 数据包的大小。（默认为56） -c # ping每个目标的次数 (默认为1) -f # 从文件获取目标列表(不能与 -g 同时使用) -l # 循环发送ping -g # 通过指定开始和结束地址来生成目标列表,可以使网段 -u # 显示不可到达的目标 用法 测试整个网段：\nfping -g 192.168.0.0/24 2\u0026gt;/dev/nul 参考链接  https://wangchujiang.com/linux-command/c/fping.html  ","permalink":"https://kozilla.io/posts/2/","summary":"fping命令 fping类似于ping，但比ping强大。与ping要等待某一主机连接超时或发回反馈信息不同，fping给一个主机发送完数据包后，马上给下一个主机发送数据包，实现多主机同时ping，fping还可以在命令行中指定要ping的主机数量范围。\nMac 安装 brew install fping 选项 -a # 显示存活的主机 -b # ping 数据包的大小。（默认为56） -c # ping每个目标的次数 (默认为1) -f # 从文件获取目标列表(不能与 -g 同时使用) -l # 循环发送ping -g # 通过指定开始和结束地址来生成目标列表,可以使网段 -u # 显示不可到达的目标 用法 测试整个网段：\nfping -g 192.168.0.0/24 2\u0026gt;/dev/nul 参考链接  https://wangchujiang.com/linux-command/c/fping.html  ","title":"通过 fping 探测局域网可用的服务器"},{"content":"安装 Nginx 及 Stream 模块 yum install nginx nginx-all-modules -y 配置 nginx.conf 文件  vim /etc/nginx/nginx.conf\n events { # ... } # 加入配置 stream { server { listen 13306; proxy_connect_timeout 1s; proxy_timeout 3s; proxy_pass 数据库 IP:3306; } } http { # ... } 重启 nginx:\nnginx -s relaod ","permalink":"https://kozilla.io/posts/1/","summary":"通过 Nginx 代理 MySQL或者其他 TCP 服务，在网络不通的时候，可以解决很多麻烦","title":"Nginx 配置 MySQK 代理"}]