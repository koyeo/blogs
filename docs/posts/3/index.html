<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享 | Kozilla</title>
<meta name=keywords content="vagrant">
<meta name=description content="安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。
启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile
 添加配置项：
config.vm.network &#34;forwarded_port&#34;, guest: 5671, host: 5671 config.vm.synced_folder &#34;/Users/kun/workspace&#34;, &#34;/workspace&#34; 查看《完整配置文件》。
启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：
Vagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem &#34;vboxsf&#34; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest.">
<meta name=author content="Koyeo">
<link rel=canonical href=https://kozilla.io/posts/3/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.647f79b47b2007e9d8a9325d14ffacf275b90447c34c1439370267424094e2eb.css integrity="sha256-ZH95tHsgB+nYqTJdFP+s8nW5BEfDTBQ5NwJnQkCU4us=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kozilla.io/sun.png>
<link rel=icon type=image/png sizes=16x16 href=https://kozilla.io/sun.png>
<link rel=icon type=image/png sizes=32x32 href=https://kozilla.io/sun.png>
<link rel=apple-touch-icon href=https://kozilla.io/apple-touch-icon.png>
<link rel=mask-icon href=https://kozilla.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享">
<meta property="og:description" content="安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。
启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile
 添加配置项：
config.vm.network &#34;forwarded_port&#34;, guest: 5671, host: 5671 config.vm.synced_folder &#34;/Users/kun/workspace&#34;, &#34;/workspace&#34; 查看《完整配置文件》。
启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：
Vagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem &#34;vboxsf&#34; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kozilla.io/posts/3/"><meta property="og:image" content="https://kozilla.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-03-25T22:57:41+08:00">
<meta property="article:modified_time" content="2022-03-25T22:57:41+08:00"><meta property="og:site_name" content="ExampleSite">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://kozilla.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享">
<meta name=twitter:description content="安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。
启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile
 添加配置项：
config.vm.network &#34;forwarded_port&#34;, guest: 5671, host: 5671 config.vm.synced_folder &#34;/Users/kun/workspace&#34;, &#34;/workspace&#34; 查看《完整配置文件》。
启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：
Vagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem &#34;vboxsf&#34; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://kozilla.io/posts/"},{"@type":"ListItem","position":2,"name":"mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享","item":"https://kozilla.io/posts/3/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享","name":"mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享","description":"安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。\n启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile\n 添加配置项：\nconfig.vm.network \u0026quot;forwarded_port\u0026quot;, guest: 5671, host: 5671 config.vm.synced_folder \u0026quot;/Users/kun/workspace\u0026quot;, \u0026quot;/workspace\u0026quot; 查看《完整配置文件》。\n启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：\nVagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem \u0026quot;vboxsf\u0026quot; is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest.","keywords":["vagrant"],"articleBody":"安装 Vagrant 安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：https://www.vagrantup.com/downloads。\n启动 Centos 8 $ mkdir ~/vagrant/centos8 $ cd ~/vagrant/centos8 $ vagrant init centos/8 配置端口导出和共享目录  vim ~/vagrant/centos8/Vagrantfile\n 添加配置项：\nconfig.vm.network \"forwarded_port\", guest: 5671, host: 5671 config.vm.synced_folder \"/Users/kun/workspace\", \"/workspace\" 查看《完整配置文件》。\n启动 $ vagrant up 如果启动报如下错误，请看下一节解决方案：\nVagrant was unable to mount VirtualBox shared folders. This is usually because the filesystem \"vboxsf\" is not available. This filesystem is made available via the VirtualBox Guest Additions and kernel module. Please verify that these guest additions are properly installed in the guest. This is not a bug in Vagrant and is usually caused by a faulty Vagrant box. For context, the command attempted was: mount -t vboxsf -o uid=1000,gid=1000 workspace /workspace The error output from the command was: mount: /workspace: unknown filesystem type 'vboxsf'. 修复共享目录报错 安装虚拟机依赖：\n$ vagrant ssh # 忽视报错，进入虚拟机 $ sudo yum -y install kernel kernel-devel # 安装依赖 $ exit 安装 vagrant 插件:\n$ vagrant plugin install vagrant-vbguest $ vagrant vbguest # 如果报错，先 vagrant reload 一下 $ vagrant reload $ vagrant ssh 设置 root 密码 进入虚拟机：\n$ sudo passwd root ","wordCount":"170","inLanguage":"zh","datePublished":"2022-03-25T22:57:41+08:00","dateModified":"2022-03-25T22:57:41+08:00","author":{"@type":"Person","name":"Koyeo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kozilla.io/posts/3/"},"publisher":{"@type":"Organization","name":"Kozilla","logo":{"@type":"ImageObject","url":"https://kozilla.io/sun.png"}}}</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js></script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://kozilla.io/ accesskey=h title="Kozilla (Alt + H)">Kozilla</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li id=search-li>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@algolia/autocomplete-theme-classic>
<div id=autocomplete></div>
<script src=https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js></script>
<script src=https://cdn.jsdelivr.net/npm/@algolia/autocomplete-js></script>
<script>const searchClient=algoliasearch('IZ9SHZPVJS','e22e74ef00e21da7256f282eadc25c4d'),autocomplete=window['@algolia/autocomplete-js'].autocomplete,getAlgoliaResults=window['@algolia/autocomplete-js'].getAlgoliaResults,autocompleteSearch=autocomplete({container:'#autocomplete',getSources(){return[{sourceId:'querySuggestions',getItemInputValue:({item:a})=>a.query,getItems({query:a}){return getAlgoliaResults({searchClient,queries:[{indexName:"koyeo's blog",query:a,params:{hitsPerPage:4}}]})},templates:{noResults(){return'无结果'},item({item:a,createElement:b,components:c,Fragment:d}){return b('div',{dangerouslySetInnerHTML:{__html:`<a class="search-link" href="${a.uri}">${a.title}</a>`}})}}}]}});$('.aa-Input').focus(function(){$('.aa-Autocomplete').width('550px')}).blur(function(){$(this).value(''),$('.aa-Autocomplete').width('226px')}),$('.aa-Input').keydown(function(a){a.keyCode==13&&(location.href=$('.aa-Item[aria-selected=true]').find('a').attr('href'))})</script>
</li>
<li>
<a href=https://kozilla.io/categories/ title=分类>
<span>分类</span>
</a>
</li>
<li>
<a href=https://kozilla.io/tags/ title=标签>
<span>标签</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://kozilla.io/>主页</a>&nbsp;»&nbsp;<a href=https://kozilla.io/posts/>Posts</a></div>
<h1 class=post-title>
mac 使用 vagrant 部署 linux 环境，配置端口导出，修复目录共享
</h1>
<div class=post-meta><span title="2022-03-25 22:57:41 +0800 CST">三月 25, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;Koyeo
</div>
</header>
<div class=post-content><h2 id=安装-vagrant>安装 Vagrant<a hidden class=anchor aria-hidden=true href=#安装-vagrant>#</a></h2>
<p>安装很简单，去官网下载安装 DMG 文件，双击点开安装即可。下载链接：<a href=https://www.vagrantup.com/downloads>https://www.vagrantup.com/downloads</a>。</p>
<h2 id=启动-centos-8>启动 Centos 8<a hidden class=anchor aria-hidden=true href=#启动-centos-8>#</a></h2>
<pre tabindex=0><code>$ mkdir ~/vagrant/centos8
$ cd ~/vagrant/centos8
$ vagrant init centos/8
</code></pre><h2 id=配置端口导出和共享目录>配置端口导出和共享目录<a hidden class=anchor aria-hidden=true href=#配置端口导出和共享目录>#</a></h2>
<blockquote>
<p>vim ~/vagrant/centos8/Vagrantfile</p>
</blockquote>
<p>添加配置项：</p>
<pre tabindex=0><code>config.vm.network &quot;forwarded_port&quot;, guest: 5671, host: 5671
config.vm.synced_folder &quot;/Users/kun/workspace&quot;, &quot;/workspace&quot;
</code></pre><p>查看<a href=https://gist.github.com/koyeo/7f81f134de1f322b033f5c4985c12965>《完整配置文件》</a>。</p>
<h2 id=启动>启动<a hidden class=anchor aria-hidden=true href=#启动>#</a></h2>
<pre tabindex=0><code>$ vagrant up
</code></pre><p>如果启动报如下错误，请看下一节解决方案：</p>
<pre tabindex=0><code>Vagrant was unable to mount VirtualBox shared folders. This is usually
because the filesystem &quot;vboxsf&quot; is not available. This filesystem is
made available via the VirtualBox Guest Additions and kernel module.
Please verify that these guest additions are properly installed in the
guest. This is not a bug in Vagrant and is usually caused by a faulty
Vagrant box. For context, the command attempted was:

mount -t vboxsf -o uid=1000,gid=1000 workspace /workspace

The error output from the command was:

mount: /workspace: unknown filesystem type 'vboxsf'.
</code></pre><h2 id=修复共享目录报错>修复共享目录报错<a hidden class=anchor aria-hidden=true href=#修复共享目录报错>#</a></h2>
<p>安装虚拟机依赖：</p>
<pre tabindex=0><code>$ vagrant ssh   # 忽视报错，进入虚拟机
$ sudo yum -y install kernel kernel-devel # 安装依赖
$ exit
</code></pre><p>安装 vagrant 插件:</p>
<pre tabindex=0><code>$ vagrant plugin install vagrant-vbguest
$ vagrant vbguest # 如果报错，先 vagrant reload 一下
$ vagrant reload
$ vagrant ssh
</code></pre><h2 id=设置-root-密码>设置 root 密码<a hidden class=anchor aria-hidden=true href=#设置-root-密码>#</a></h2>
<p>进入虚拟机：</p>
<pre tabindex=0><code>$ sudo passwd root
</code></pre>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://kozilla.io/tags/vagrant/>vagrant</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://kozilla.io/posts/4/>
<span class=title>« 上一页</span>
<br>
<span>Postgresql 分区表分区范围</span>
</a>
<a class=next href=https://kozilla.io/posts/2/>
<span class=title>下一页 »</span>
<br>
<span>通过 fping 探测局域网可用的服务器</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://kozilla.io/>Kozilla</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>